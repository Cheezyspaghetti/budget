{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var app = angular.module('budgetApp', [\n    'checklist-model',\n    'ngAnimate'\n]);\n\napp.config(function ($interpolateProvider) {\n    //$routeProvider\n    //    .when('home', {controller: 'HomeController'})\n    //    .when('accounts', {controller: 'AccountsController'})\n    //    .when('budgets', {controller: 'BudgetsController'})\n    //    .when('help', {controller: 'HelpController'})\n    //    .when('preferences', {controller: 'PreferencesController'});\n\n    // register http interceptor\n    //$httpProvider.interceptors.push('ErrorHandler');\n\n    $interpolateProvider.startSymbol('[[');\n    $interpolateProvider.endSymbol(']]');\n});\n\napp.run(runBlock);\n\nfunction runBlock ($rootScope, $sce, UsersFactory, TotalsFactory, ShowFactory, ErrorsFactory) {\n\n    $rootScope.show = ShowFactory.defaults;\n\n    $rootScope.feedback_messages = [];\n\n    $rootScope.totalChanges = {};\n\n    $rootScope.feedback_messages = [];\n\n    $rootScope.clearTotalChanges = function () {\n        $rootScope.totalChanges = {};\n    };\n\n    if (typeof env !== 'undefined') {\n        $rootScope.env = env;\n    }\n\n    /**\n     * Todo: custom angular filter\n     * @param $date\n     * @returns {*}\n     */\n    $rootScope.formatDate = function ($date) {\n        if ($date) {\n            if (!Date.parse($date)) {\n                $rootScope.provideFeedback('Date is invalid', 'error');\n                return false;\n            }\n            else {\n                return Date.parse($date).toString('yyyy-MM-dd');\n            }\n        }\n        return false;\n    };\n\n    $rootScope.clearTotalChanges = function () {\n        $rootScope.totalChanges = {};\n    };\n\n    $rootScope.responseError = function (response) {\n        $rootScope.provideFeedback(ErrorsFactory.responseError(response), 'error');\n        $rootScope.hideLoading();\n    };\n\n    $rootScope.getSideBarTotals = function () {\n        $rootScope.totalsLoading = true;\n        TotalsFactory.getSideBarTotals()\n            .then(function (response) {\n                $rootScope.sideBarTotals = response.data.data;\n                $rootScope.totalsLoading = false;\n            })\n            .catch(function (response) {\n                $rootScope.responseError(response);\n            });\n    };\n\n    if (typeof page !== 'undefined' && (page === 'home' || page === 'fixedBudgets' || page === 'flexBudgets' || page === 'unassignedBudgets')) {\n        $rootScope.getSideBarTotals();\n    }\n\n    $rootScope.closePopup = function ($event, $popup) {\n        var $target = $event.target;\n        if ($target.className === 'popup-outer') {\n            $rootScope.show.popups[$popup] = false;\n        }\n    };\n\n    $(window).load(function () {\n        $(\".main\").css('display', 'block');\n        $(\"footer, #navbar\").css('display', 'flex');\n        $(\"#page-loading\").hide();\n    });\n\n    $rootScope.showLoading = function () {\n        $rootScope.loading = true;\n    };\n\n    $rootScope.hideLoading = function () {\n        $rootScope.loading = false;\n    };\n\n    $rootScope.provideFeedback = function ($message, $type) {\n        var $new = {\n            message: $sce.trustAsHtml($message),\n            type: $type\n        };\n\n        $rootScope.feedback_messages.push($new);\n\n        setTimeout(function () {\n            $rootScope.feedback_messages = _.without($rootScope.feedback_messages, $new);\n            $rootScope.$apply();\n        }, 3000);\n    };\n\n    $rootScope.deleteUser = function () {\n        if (confirm(\"Do you really want to delete your account?\")) {\n            if (confirm(\"You are about to delete your account! You will no longer be able to use the budget app. Are you sure this is what you want?\")) {\n                $rootScope.showLoading();\n                UsersFactory.deleteAccount(me)\n                    .then(function (response) {\n                        $rootScope.provideFeedback('Your account has been deleted');\n                        $rootScope.hideLoading();\n                    })\n                    .catch(function (response) {\n                        $rootScope.responseError(response);\n                    });\n            }\n        }\n    };\n\n}\n"],"sourceRoot":"/source/"}